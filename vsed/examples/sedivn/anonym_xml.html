<html>
  <head>
    <meta charset="utf-8">
    <title>Bar Chart by Visual Sedimentation</title>
    <title>SVN Commits by Visual Sedimentation</title>
    <script type="text/javascript" src="../../js/_VisualSedimentation.js"></script>
    <style>@import url(../../css/fan-of-mike-style.css);</style>
		<link href="sedivn.css" rel="stylesheet" type="text/css"/>
		<!-- Required for SLIDER -->
		<link href="../lib/jquery-ui/development-bundle/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css"/>
		<script src="../lib/jquery-ui/js/jquery-ui-1.8.18.custom.min.js"></script>		
    <body>		
			<script type="text/javascript">    

			// datasets/aviz-svn-march12.xml" for full AVIZ but need changes
  	  //d3.xml("datasets/aviz-svn-march12.xml", function(xml) {
			d3.xml("datasets/aviz-svn-infovis12.xml", function(xml) {

				entries = d3.select(xml).selectAll("logentry")[0];

				 authors = d3.keys(d3.nest()
					.key(function(d) {return d3.select(d).select("author")[0][0].textContent;})
					.map(entries));

						var log = d3.select("body").append("log");
					entries.filter(function(d, i) {

						var id_author = authors.indexOf(d3.select(d).select("author")[0][0].textContent)

						var logentry = log.append("logentry").attr("revision", i);
						logentry.append("author").text("#"+id_author);
						logentry.append("date").text(d3.select(d).select("date")[0][0].textContent);
						logentry.append("paths").text(d3.select(d).selectAll("path")[0].length);
						logentry.append("msg").text( d3.select(d).select("msg")[0][0].textContent.replace(/[a-zA-Z]/g, "X") );
					});
				});

  	</script>
  </body>   
</html>